<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en-US"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>June 2019 report: fion, bpg and smtpd &#183; poolp.org</title>
<meta name=title content="June 2019 report: fion, bpg and smtpd &#183; poolp.org"><link rel=canonical href=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/><link type=text/css rel=stylesheet href=/css/main.bundle.min.aae4ab0954fc7f7114dd14fabe5a76a6cf645fd2fabe5cef37d61d1fd5d62e9e65e2793e72c6cc5d3da9792419995b3533cbbdc333bc3897f31f77d72a4a27f7.css integrity="sha512-quSrCVT8f3EU3RT6vlp2ps9kX9L6vlzvN9YdH9XWLp5l4nk+csbMXT2peSQZmVs1M8u9wzO8OJfzH3fXKkon9w=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.cab249ec2f87c8efdec1594e650838fcb9837dff59bf06c71a79fe5e0a7a0f19fcca05399fe094d181e68eb57354ed0b2328cfe53accab2b24257f0beda841a9.js integrity="sha512-yrJJ7C+HyO/ewVlOZQg4/LmDff9ZvwbHGnn+Xgp6Dxn8ygU5n+CU0YHmjrVzVO0LIyjP5TrMqyskJX8L7ahBqQ==" data-copy data-copied></script><script src=/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/"><meta property="og:site_name" content="poolp.org"><meta property="og:title" content="June 2019 report: fion, bpg and smtpd"><meta property="og:description" content="TL;DR: - started working on FION, a static tile window manager - revived BPG, a PGP parser - converted OpenSMTPD to libtls - wrote a library to make writing of native C OpenSMTPD filters easy - started writing a filter-rspamd Thanks to my patrons !"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-06-30T07:42:00+00:00"><meta property="article:modified_time" content="2019-06-30T07:42:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="June 2019 report: fion, bpg and smtpd"><meta name=twitter:description content="TL;DR: - started working on FION, a static tile window manager - revived BPG, a PGP parser - converted OpenSMTPD to libtls - wrote a library to make writing of native C OpenSMTPD filters easy - started writing a filter-rspamd Thanks to my patrons !"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"June 2019 report: fion, bpg and smtpd","headline":"June 2019 report: fion, bpg and smtpd","abstract":"TL;DR: - started working on FION, a static tile window manager - revived BPG, a PGP parser - converted OpenSMTPD to libtls - wrote a library to make writing of native C OpenSMTPD filters easy - started writing a filter-rspamd Thanks to my patrons !","inLanguage":"en-US","url":"https:\/\/poolp.org\/posts\/2019-06-30\/june-2019-report-fion-bpg-and-smtpd\/","author":{"@type":"Person","name":""},"copyrightYear":"2019","dateCreated":"2019-06-30T07:42:00\u002b00:00","datePublished":"2019-06-30T07:42:00\u002b00:00","dateModified":"2019-06-30T07:42:00\u002b00:00","mainEntityOfPage":"true","wordCount":"3528"}]</script><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/custom.css><script>for(var elements=document.querySelectorAll(".discord-dialog__close-button, .discord-dialog"),i=0;i<elements.length;i++)elements[i].addEventListener("click",function(){toggle(".discord-dialog")})</script><style>@import "https://fonts.cdnfonts.com/css/whitney-2";.discord-dialog *,.discord-dialog :after,.discord-dialog :before{box-sizing:inherit}.discord-dialog a{text-decoration:none}@keyframes discord-dialog__transition{0%{opacity:0;transform:translateY(16px)}100%{opacity:1;transform:translateY(0)}}.discord-dialog{-webkit-tap-highlight-color:transparent;box-sizing:border-box;display:none;z-index:2147483647;position:fixed;max-width:288px;right:0;bottom:0;margin:18px;border-radius:10px;font-family:Whitney,sans-serif;background:#2e3136;color:#72767d;box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.4);transition:opacity .3s cubic-bezier(.25,.8,.25,1),transform .3s cubic-bezier(.25,.8,.25,1);animation:discord-dialog__transition .2s}.discord-dialog--active{display:block}.discord-dialog__container{font-size:14px;line-height:1.2;color:#99aab5;padding:8px 28px 28px}.discord-dialog__logo{display:none;width:auto;margin-top:5px;height:24px}.discord-dialog__logo path{fill:#fff}.discord-dialog__close-button{position:absolute;right:0;padding:16px;cursor:pointer}.discord-dialog__close-button svg{height:20px;width:20px}.discord-dialog__close-button svg path{fill:#ccc}.discord-dialog__close-button:hover{opacity:.8}.discord-dialog__close-button:active{opacity:.4}.discord-dialog__footer{padding:10px 20px}.discord-dialog__guild-icon{border-radius:50%;width:64px;display:block;height:auto;margin:16px 0}.discord-dialog__guild{font-size:24px;line-height:30px;margin-bottom:12px;font-weight:700;color:#fff}.discord-dialog__btn{background:#7289da;color:#fff;text-align:center;display:block;border-radius:1px;margin:8px;font-size:16px;line-height:24px;border-radius:3px;text-align:center;padding:12px 16px;position:relative;top:-6px;box-shadow:0 2px 4px rgba(0,0,0,.3);transition:box-shadow .3s cubic-bezier(.25,.8,.25,1),background .3s cubic-bezier(.25,.8,.25,1)}.discord-dialog__btn:hover{background:#8095de}.discord-dialog__btn:active{background:#677bc4}.discord-dialog__explainer{display:block;margin:2px 8px;color:#7289da;font-size:12px;text-align:right;top:-6px}.discord-dialog__explainer:hover{opacity:.8}.discord-dialog__explainer:active{opacity:.6}.discord-button{-webkit-tap-highlight-color:transparent;box-sizing:border-box;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);position:fixed;bottom:0;right:0;z-index:50;margin:23.5px;padding:15.5px;border-radius:50%;background:#7289da;cursor:pointer;transition:box-shadow .3s cubic-bezier(.25,.8,.25,1),background .3s cubic-bezier(.25,.8,.25,1);display:flex;text-align:center;align-items:center;justify-content:center}.discord-button svg{height:28px;width:28px;transition:background .3s cubic-bezier(.25,.8,.25,1)}.discord-button svg path{fill:#fff}.discord-button:hover{box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.discord-button:hover svg{opacity:.6}.discord-button:active{box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23)}.discord-button:active svg{opacity:.4}</style><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom bg-neutral dark:bg-neutral-800"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>poolp.org</span>
<img src=/img/poolp_bing.png width=512 height=512 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt=poolp.org></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-bold text-gray-500 hover:text-gray-900">poolp.org</a><div class="text-sm text-neutral-700 dark:text-neutral-400"><br>Code, build and run.</div></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=https://github.com/poolpOrg/ target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Github</p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher aria-label="Dark mode switcher" type=button><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button style=margin-right:5px><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=https://github.com/poolpOrg/ target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Github</p></a></li></ul><hr><ul class="flex mt-4 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li class=mb-1><a href=/categories/technology/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title>Technology</p></a></li><li class=mb-1><a href=/categories/music/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title>Music</p></a></li><li class=mb-1><a href=/categories/personal/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title>Personal</p></a></li></ul></div></label></div></div><div class="main-menu flex pb-3 flex-col items-end justify-between md:justify-start space-x-3" style=margin-top:-15px><div class="hidden md:flex items-center space-x-5"><a href=/categories/technology/ class="flex items-center"><p class="text-xs font-light text-gray-500 hover:text-gray-900" title>Technology</p></a><a href=/categories/music/ class="flex items-center"><p class="text-xs font-light text-gray-500 hover:text-gray-900" title>Music</p></a><a href=/categories/personal/ class="flex items-center"><p class="text-xs font-light text-gray-500 hover:text-gray-900" title>Personal</p></a></div></div></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><br><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="dark:text-neutral-300 text-sm">Message to
<u><b><a href=https://github.com/sponsors/poolpOrg>github</a></b></u> and
<u><b><a href=https://www.patreon.com/gilles>patreon</a></b></u> sponsors:
<b>THANK YOU ❤️</b></span></div><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>poolp.org</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/>June 2019 report: fion, bpg and smtpd</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">June 2019 report: fion, bpg and smtpd</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2019-06-30T07:42:00+00:00>30 June 2019</time><span class="px-2 text-primary-500">&#183;</span><span>3528 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">17 mins</span><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]><a href=https://github.com/poolpOrg/poolp.org/tree/master/content/posts/2019-06-30/index.md class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title="Edit content"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg height="1em" viewBox="0 0 512 512"><path fill="currentcolor" d="M441 58.9 453.1 71c9.4 9.4 9.4 24.6.0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9.0zM209.8 256.2 344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1L186.9 325l16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25 175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 1e2c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l1e2-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7.0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4.0 152V424c0 48.6 39.4 88 88 88H360c48.6.0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1.0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H2e2c13.3.0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg></span></span></a></span></div><div class="flex flex-row flex-wrap items-center"><div style=cursor:pointer onclick='window.open("/authors/gilles/","_self")'>Gilles Chehade</div></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/categories/technology/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Technology</span></span></span></div></div><div class="flex author"><div class=place-self-center><div class="text-2xl sm:text-lg"></div></div></div><div class="flex author author-extra mt-4"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 src=/img/gilles_hu8275017791684824193.jpg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><a href=https://poolp.org//authors/gilles class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Gilles Chehade</a><div class="text-sm text-neutral-700 dark:text-neutral-400">I&rsquo;m not a cat.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:gilles@poolp.org target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/poolpOrg target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/gilleschehade target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://social.poolp.org/@gilles target=_blank aria-label=Mastodon rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://www.youtube.com/gilleschehade target=_blank aria-label=Youtube rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitch.tv/poolporg target=_blank aria-label=Twitch rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M391.17 103.47H352.54v109.7h38.63zM285 103H246.37V212.75H285zM120.83.0 24.31 91.42V420.58H140.14V512l96.53-91.42h77.25L487.69 256V0zM449.07 237.75l-77.22 73.12H294.61l-67.6 64v-64H140.14V36.58H449.07z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="dark:text-neutral-300 text-sm">If you like reading articles on this website,
<b>please ❤️</b> consider <b>sharing on social networks</b> to help increase visibility:
<b>this helps buy time for new articles and projects</b> !<section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;text=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Tweet on Twitter" aria-label="Tweet on Twitter"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;resubmit=true&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://pinterest.com/pin/create/bookmarklet/?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;description=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Pin on Pinterest" aria-label="Pin on Pinterest"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M496 256c0 137-111 248-248 248-25.6.0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8.0 128.7-68.8 128.7-154.3.0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1.0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6.0-54.7 41.4-107.6 112-107.6 60.9.0 103.6 41.5 103.6 100.9.0 67.1-33.9 113.6-78 113.6-24.3.0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6.0-19-10.2-34.9-31.4-34.9-24.9.0-44.9 25.7-44.9 60.2.0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9.0 361.1.0 256 0 119 111 8 248 8s248 111 248 248z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;quote=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;subject=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://api.whatsapp.com/send?text=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;resubmit=true&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title aria-label><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4.0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3.0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2.0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2.0-101.7 82.8-184.5 184.6-184.5 49.3.0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5.0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3.0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://t.me/share/url?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;resubmit=true&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title aria-label><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a></section></span></div><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open id=TOCView class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#thanks-to-my-patrons->Thanks to my patrons !</a></li><li><a href=#fion-a-featureless-ion>FION: a featureless ion</a></li><li><a href=#fions-feature>FION&rsquo;s feature</a></li><li><a href=#obligatory-screenshots>Obligatory screenshots</a></li><li><a href=#bpg-bsd-privacy-guard>BPG: BSD Privacy Guard</a></li><li><a href=#opensmtpd>OpenSMTPD:</a></li><li><a href=#opensmtpd-openssl---libtls-migration>OpenSMTPD: OpenSSL -> libtls migration</a></li><li><a href=#opensmtpd-filters>OpenSMTPD: Filters</a></li><li><a href=#timestamps-in-filter-events>timestamps in filter events</a></li><li><a href=#filter-strderr-mapped-to-log_warn>filter strderr mapped to <code>log_warn()</code></a></li><li><a href=#filter-eventlog>filter-eventlog</a></li><li><a href=#libopensmtpd>libopensmtpd</a></li><li><a href=#filter-rspamd-in-progress>filter-rspamd in progress</a></li><li><a href=#what-next->What next ?</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#thanks-to-my-patrons->Thanks to my patrons !</a></li><li><a href=#fion-a-featureless-ion>FION: a featureless ion</a></li><li><a href=#fions-feature>FION&rsquo;s feature</a></li><li><a href=#obligatory-screenshots>Obligatory screenshots</a></li><li><a href=#bpg-bsd-privacy-guard>BPG: BSD Privacy Guard</a></li><li><a href=#opensmtpd>OpenSMTPD:</a></li><li><a href=#opensmtpd-openssl---libtls-migration>OpenSMTPD: OpenSSL -> libtls migration</a></li><li><a href=#opensmtpd-filters>OpenSMTPD: Filters</a></li><li><a href=#timestamps-in-filter-events>timestamps in filter events</a></li><li><a href=#filter-strderr-mapped-to-log_warn>filter strderr mapped to <code>log_warn()</code></a></li><li><a href=#filter-eventlog>filter-eventlog</a></li><li><a href=#libopensmtpd>libopensmtpd</a></li><li><a href=#filter-rspamd-in-progress>filter-rspamd in progress</a></li><li><a href=#what-next->What next ?</a></li></ul></li></ul></nav></div></details><script>var margin=200,marginError=50;(function(){var t=$(window),e=$("#TOCView"),s=e.height();function n(){var n=t.height()-margin;s>=n?(e.css("overflow-y","scroll"),e.css("max-height",n+marginError+"px")):(e.css("overflow-y","hidden"),e.css("max-height","9999999px"))}t.on("resize",n),$(document).ready(n)})()</script></div></div><div class="min-w-0 min-h-0 max-w-prose"><blockquote><b>TL;DR:</b><br><pre><code>- started working on FION, a static tile window manager
- revived BPG, a PGP parser
- converted OpenSMTPD to libtls
- wrote a library to make writing of native C OpenSMTPD filters easy
- started writing a filter-rspamd
</code></pre></blockquote><h2 class="relative group">Thanks to my patrons !<div id=thanks-to-my-patrons- class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#thanks-to-my-patrons- aria-label=Anchor>#</a></span></h2><p>First of all,
a huge thanks to my first patrons:</p><ul><li>Bleader Raton</li><li>Diego Meseguer</li><li>Mischa Peters</li><li>Vegar Linge Halaand</li></ul><p>I have recently switched to a 75% part-time schedule at work so that I can spend
a &ldquo;free&rdquo; week each month working on my own stuff, mostly opensource, without any
kind of pressure: no one knows what I&rsquo;ll be working on and no one but me gets to
decide how I&rsquo;ll spend this time.</p><p>This comes at the cost of slashing a quarter of my wage, which is sustainable but
not ideal, so while most of my &ldquo;free&rdquo; weeks will be spent on opensource, I&rsquo;ll be
doing some sponsored development or short contracts to cover some of the loss if
needed.</p><p>I opened a patreon account so that people who care about my work can sponsor it,
allowing me to spend most (if not all) of these &ldquo;free&rdquo; weeks publishing code for
the community. If you want me to spend more time doing this then you know what
to do: <a href=https://www.patreon.com/gilles target=_blank>become my patron</a> !</p><p>So thanks again to my patrons who make this possible, I will list them in all of
my monthly reports, they are the sponsors of the work I describe below.</p><h2 class="relative group">FION: a featureless ion<div id=fion-a-featureless-ion class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#fion-a-featureless-ion aria-label=Anchor>#</a></span></h2><p>I&rsquo;m not too much of a graphical interface person,
so when I was shown the ion window manager in 2003 I became addicted and,
ever since,
it&rsquo;s been very hard for me to work efficiently using anything else.
This is not an elitist thing,
it is really me being easily distracted by stuff like windows not being properly
aligned and similar stupid concerns that actually slow me considerably.
I call this the &ldquo;oh-a-butterfy&rdquo; effect.</p><p>Unfortunately,
the last ion release dates from 2009 and is unmaintained.
This leads to multiple problems,
one being the lack of modern features, like multi-screen, which is essential for
me considering the amount of time I spend reading code and specs side-to-side.
Another problem is the fact that it&rsquo;s been removed from most repositories, and I
keep having to build it from source here and there.
Recently it&rsquo;s been a bit more difficult because on some distro,
the dependencies for ion were no longer available and I had to start patching it
here and there so it could build.</p><p>I fear the day this happens on OpenBSD because it will mean that I have to spend
time maintaining a piece of code for which there&rsquo;s no upstream anymore &mldr; or be
back to working partly in console, partly in a maximized tmux when I really need
a browser visible.</p><p>I know this will lead people to tell me &ldquo;but there&rsquo;s notion, ion&rsquo;s fork&rdquo; or &ldquo;but
you can use awesome/dwm/i3/wmii/<insert yours here>&rdquo; but honestly I have tried a
lot of different window managers along the years to try getting away from ion as
it was abandoned and they never quite fit for me. I can only work if I have a wm
that does tabs within static tiles that I can h-split/v-split at will and resize
however I want. Notion came short because at least on OpenBSD it was laggy.</p><p>I might as well spend a few hours / days working on my own, learn how they work,
and release something I&rsquo;m willing to maintain on the long run as it scratches my
own itches.</p><h2 class="relative group">FION&rsquo;s feature<div id=fions-feature class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#fions-feature aria-label=Anchor>#</a></span></h2><p>I didn&rsquo;t care that much for many of ion&rsquo;s feature, never used the lua binding or
the floating workspaces.</p><p>FION will simply implement what I intend to use, so at the time being, this is:</p><ul><li>pledge()-ed</li><li>multiple screens of different sizes</li><li>multiple workspaces per screen</li><li>workspaces may be split in multiple horizontal and vertical tiles</li><li>each tile may hold multiple X clients in tabs</li><li>tiles may be resized</li><li>screens / workspaces / tiles / tabs may be controlled through keyboard</li></ul><p>As of today, I&rsquo;d say I&rsquo;m halfway through, FION will detect screens and setup the
workspaces to match screen size. It can create as many workspaces as you want on
every single screen. It can h-split and v-split as many tiles as you want on the
current workspace. It can iterate through workspaces and tiles. It can start the
X clients and attach them, properly sized, to the current tile. It can give the
focus to a tile through keyboard-triggered iteration of tiles or by moving mouse
over a tile.</p><p>Can you try it yet ? nope.</p><p>FION currently does not have the logic to remove tiles, you can create and split
but not kill tiles, which is not hard to do but I just ran of time this week ;-)</p><p>Also, keyboard events are not properly handled yet so I had to map features to a
simple key like &rsquo;n&rsquo; or &lsquo;p&rsquo; to test them. Until I have more time for figuring out
how I can implement my keyboard shortcuts so that they use control sequences, it
will not be usable for daily use.</p><p>Code is already committed on Github but again &mldr; not usable, so stay tuned, the
first usable version will be announced on <a href=https://twitter.com/poolpOrg target=_blank>twitter</a>
when it&rsquo;s available.</p><h2 class="relative group">Obligatory screenshots<div id=obligatory-screenshots class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#obligatory-screenshots aria-label=Anchor>#</a></span></h2><p>I must have spent about six hours worth of work on it and the result is quite ok
so I have good hope (no promise !) to make a first beta release during my &ldquo;free&rdquo;
week in July.</p><p>Here are a couple screenshots:</p><p>FION ran on my laptop a few days ago before X clients were resized to match tiles:</p><img alt="FION on my laptop screen" src=2019-06-30-fion_1.png width=100%>
[full screen](2019-06-30-fion_1.png)<p>FION ran on a bigger screen this morning:</p><img alt="FION on my 3440x1440 screen" src=2019-06-30-fion_2.png width=100%>
[full screen](2019-06-30-fion_2.png)<p>And because a project doesn&rsquo;t exist until it has a logo:</p><img alt="FION logo" src=2019-06-30-fion_logo.jpg width=100%>
[full screen](2019-06-30-fion_logo.jpg)<h2 class="relative group">BPG: BSD Privacy Guard<div id=bpg-bsd-privacy-guard class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#bpg-bsd-privacy-guard aria-label=Anchor>#</a></span></h2><p>While looking at old private repositories to decide if I should axe them or not,
I ran into an interesting one: bpg.</p><p>Long story short,
while I was a student in 2002 or 2003,
I was doing night shifts at a security company to monitor firewalls and since it
was essentially a passive job because I had nothing to do until the screens went
all red, I started working on BPG a BSD-licensed PGP implementation.</p><p>Then, NetBSD came up with a similar project for a Google Summer of code and they
had someone already working on it, so I gave up as I had only a few weekly hours
available for this and my work would surely be less good than someone working on
it full-time for NetBSD.</p><p>Anyways,
I spent a while looking at the code to see what could be done with it, and it is
actually not bad at all.</p><p>I have a parser that can read all PGP packets in both old & new format, map them
to appropriate structures that can actually be used: it can essentially read the
keyrings and packets generated from gpg2, though it will not decrypt/verify.</p><p>The parser code was quite clean and I didn&rsquo;t make changes to it except remove an
allocator to replace it with <code>malloc_conceal(3)</code>. I did a bit of code cleanup on
other parts, like armoring which was ugly, but that&rsquo;s about it.</p><p>I don&rsquo;t know what to do about that code, I have no idea how usable is the NetBSD
implementation and how interesting it is for people to have another PGP utility.
I will release the parser for sure since the code is already here and maybe it&rsquo;s
going to be useful to someone but I&rsquo;m unsure if I should move project forward at
this point. Oh and I need a new name anyways because bpg is already taken and it
is certainly not going to be OpenBPG to avoid confusion with OpenBGP :-)</p><p>I have quickly written code to generate RSA keypairs just for fun:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>laptop$ bpg key gen rsa <span style=color:#bd93f9>2048</span> &gt; /tmp/rsa2048.bpg
</span></span><span style=display:flex><span>..........................................+++...................+++.
</span></span><span style=display:flex><span>laptop$ bpg debug parse /tmp/rsa2048.bpg
</span></span><span style=display:flex><span><span style=color:#6272a4>## 05 : New format Secret-Key packet (920 bytes)</span>
</span></span><span style=display:flex><span>        version: <span style=color:#bd93f9>4</span>
</span></span><span style=display:flex><span>        algorithm: RSA <span style=color:#ff79c6>(</span>encrypt or sign<span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span>        keyid: e60e44654c3409be
</span></span><span style=display:flex><span>        fingerprint: 7bfd297855a9c0d22a492ba2e60e44654c3409be
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>## 0d : New format User ID packet (16 bytes)</span>
</span></span><span style=display:flex><span>        content: test@example.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>laptop$ cat /tmp/rsa2048.bpg
</span></span><span style=display:flex><span>-----BEGIN PGP PRIVATE KEY BLOCK-----
</span></span><span style=display:flex><span>Version: BPG v0.1 <span style=color:#ff79c6>(</span>OpenBSD<span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>xcLYBF0YccABCACzay1zxLQzD9WvOaF5DZXKIx5nmwP70+ff4XceepFnylwe7iKzTUF6W4kv
</span></span><span style=display:flex><span>QxOF++z9SQ5mF0melyj0+TkJXUSs7MzNjuwb4OhDLiM9uVJ2J1wxA3KivY0pVjvJPtPTlMpZ
</span></span><span style=display:flex><span>D7Ebb1CnagP75DEcgpdzWHDSzBbgHN89ct6M7fPZ756iDxHdnhO8syr9sB4GOJyj8hC2dC4y
</span></span><span style=display:flex><span>qJvn7G7/BdQwDov23FUGcddWXIyPMs4GGbE+mpV1U6jqZbNUkGPl+Kh8CfRU15D2/60PsrgD
</span></span><span style=display:flex><span>3OSDo3J/DwGd2/NiVRRWVSOOtpzm4sc4j1J76nwrUJvvWRlH+AMOfDxoDu03bY2Jb/NtABEB
</span></span><span style=display:flex><span>AAEAB/9Pw8ZhQYIbcV6+mBCBkNiXFSXfSbtrqbncfpBGrJcYXY628YfbzuzdSPSkXl2/o1Cp
</span></span><span style=display:flex><span>CmGsYY4JQ4qh3mrNDvoJJv2mJXQysLqRo2Fnf4x5muYRpEbCsyKezgemYJgr6GpNTfyfBc4F
</span></span><span style=display:flex><span>n8xFoB11X1mVniwKi1FgMXXOC9OFNATFTlK2EjiBCBN1g+AbO31ykqDyhuVjAisQXlrpvRSr
</span></span><span style=display:flex><span>Jlk3zwNDgyu8jd9NyqCj3wUbp5GTj9/N+JVqm4lxqRAXUJk804w9q4Vn1x5f+lxyOw70m6vV
</span></span><span style=display:flex><span>9xKZqKB/g2CmqFNVn8nzparvZQ45FSwKFkCz8Z0XrCJG8HvxkS0fBewu2BLBBADvAzcqblpX
</span></span><span style=display:flex><span>9ygSDsOF/JDt9nhduLcVDgFzOagfZvh9eAny0YGQZ7rue2Vd3DKbMRBkybpn3jKpRbJC8+96
</span></span><span style=display:flex><span>6AVaaxtoaHt7jKxZMHdjlxRPe6f9rFqETgL4a0+xyGzGd72t2OZG9pXNbydrwJPo0PSybkvR
</span></span><span style=display:flex><span>hkyd7vP3886X1EkdrwQAwCupzj3qSKf06ATAy+31rKoIUgsHD7OuyrNl7I1FZIMWNttaEl1C
</span></span><span style=display:flex><span>Z0bYaKHaTZbtoNk9EsISxSIXf3HB7nisKmGDe+LfXD06q9Bk1Tpjoj+zMXhJAm/NOQfbWXgJ
</span></span><span style=display:flex><span>3/1b6EbI63o1JcBlZDXbrGv5IOY+c7gZqbOc3hD8EThHA6MD/0fQC4TuqH9nkJVyiDp0G+48
</span></span><span style=display:flex><span>nq2oFDiDEfJ58TiSFlws/K+nuy2uGGO91iJLA6go5B87b0ihvl6A1Z4XFXuopRMcVp87n9gH
</span></span><span style=display:flex><span>qqRLhvoBqhMdVlfPnYr8JZYu0HkzmFtCnwuQOIA8EH8FQ65ImrP5PopazIHiUwhunrTzoAWp
</span></span><span style=display:flex><span>/4JOulbNEHRlc3RAZXhhbXBsZS5jb20<span style=color:#ff79c6>=</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>=</span>0fuz
</span></span><span style=display:flex><span>-----END PGP PRIVATE KEY BLOCK-----
</span></span><span style=display:flex><span>laptop$
</span></span></code></pre></div><p>They are not valid, generating a valid key that can be imported to
gnupg requires adding a signature packet which means I have to write the
signing code to do that.</p><p>So there we go, either the project ends up as a PGP parsing library that others
may use freely in their PGP implementations or it can evolve into a PGP library
and utility, it depends on how needed and wanted this is by the community.</p><p>I will commit what I have during July.</p><h2 class="relative group">OpenSMTPD:<div id=opensmtpd class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#opensmtpd aria-label=Anchor>#</a></span></h2><p>What should come as no surprise: I spent most my week working on OpenSMTPD.</p><p>I have tackled two topics:</p><ul><li>migration from the OpenSSL to the libtls API for TLS support</li><li>filters</li></ul><h2 class="relative group">OpenSMTPD: OpenSSL -> libtls migration<div id=opensmtpd-openssl---libtls-migration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#opensmtpd-openssl---libtls-migration aria-label=Anchor>#</a></span></h2><p>I have started working on the migration from the OpenSSL API to the libtls API
for TLS support in OpenSMTPD.</p><p>And by &ldquo;I have started&rdquo;, I really mean &ldquo;I&rsquo;m almost done&rdquo;.</p><p>The server side is mostly finished as I just need to rewrite the SNI support
in a slightly different way. The client side is also mostly finished but needs a
bit of cleanup.</p><p>This wasn&rsquo;t as straightforward as I thought it would be, mostly due to the fact
that OpenSMTPD uses a low-level &ldquo;io&rdquo; API for all its network io and that it was
tricky to work on a progressive migration. I eventually found a way that allowed
me to migrate the client-side first, then focus on the server-side, then use
solely libtls. When this will be committed to OpenBSD, it will have to be an
atomic switch, I won&rsquo;t be able to progressively bring server and client side
migrations.</p><p>I also ran into some issues that were not easy to tackle, like the fact that we
used ex data in RSA / EC_KEY objects to pass pki name to the privsep crypto
engine for key lookups &mldr; but libtls already used ex data to pass a checksum.
I could have worked-around but it made sense leaving the checksum in ex data,
as it&rsquo;ll be useful in the future, so a bit of refactoring was require here and
there.</p><p>So libtls-enabled OpenSMTPD is now a thing,
when its finally commited I&rsquo;ll be able to close multiple feature-requests that
will be trivial to implement or already solved by sife-effect of the mgiration.</p><p><strong>Does this mean OpenSMTPD will become LibreSSL only ?</strong></p><p>NOPE.
This means that instead of having OpenSMTPD detect and deal with the differences
between OpenSSL and LibreSSL as well as different OpenSSL versions, it will just
depend on the libtls interface. We can then work on having a portable libtls for
use as a wrapper around OpenSSL. This will then solve the LibreSSL vs OpenSSL vs
different versions of OpenSSL issue for good.</p><h2 class="relative group">OpenSMTPD: Filters<div id=opensmtpd-filters class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#opensmtpd-filters aria-label=Anchor>#</a></span></h2><p>I have resumed working on filters and this resulted in a few interesting bits.</p><h2 class="relative group">timestamps in filter events<div id=timestamps-in-filter-events class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#timestamps-in-filter-events aria-label=Anchor>#</a></span></h2><p>Until now,
filter events reported the time at which an event was generated using a time_t
unix timestamp accounting seconds since epoch.</p><p>I had already converted reporting events to use a timeval for sub-second precision,
so I also converted filter events to use a timeval too.</p><h2 class="relative group">filter strderr mapped to <code>log_warn()</code><div id=filter-strderr-mapped-to-log_warn class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#filter-strderr-mapped-to-log_warn aria-label=Anchor>#</a></span></h2><p>I okayed a diff from <code>martijn@</code> to map the <code>stderr</code> file-descriptor in filters to
an endpoint in smtpd which logs all input with <code>log_warn()</code>.</p><p>This means that a filter calling <code>warnx()</code> or a shell script doing an <code>echo bleh >&amp;2</code> will be logged in <code>maillog</code>,
making it simpler to see output during development and in case of issues in production.</p><h2 class="relative group">filter-eventlog<div id=filter-eventlog class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#filter-eventlog aria-label=Anchor>#</a></span></h2><p>I have committed to github my first native filter, <code>filter-eventlog</code> which is a
filter written in C that reports ALL smtp-in events to an append-only file, and
creating a new file every day to hold the events of the day.</p><p>This is useful for filter developers as it allows them to check what events are
generated by the daemon and which ones they should listen to in their filters.</p><p>With the lines below in your config:</p><pre tabindex=0><code>[...]

filter mylogs proc-exec &#34;/usr/libexec/filter-eventlog /tmp/logs&#34;

listen on socket filter mylogs

[...]
</code></pre><p>Sending a mail will result in the following being written to files within /tmp/logs:</p><pre tabindex=0><code>report|1|1561888072.457091|smtp-in|link-connect|d812eceafa0ae39e|laptop.home|pass|local:0|local:0
report|1|1561888072.457781|smtp-in|filter-response|d812eceafa0ae39e|connected|proceed
report|1|1561888072.457800|smtp-in|protocol-server|d812eceafa0ae39e|220 laptop.home ESMTP OpenSMTPD
report|1|1561888072.458290|smtp-in|protocol-client|d812eceafa0ae39e|EHLO localhost
report|1|1561888072.458773|smtp-in|filter-response|d812eceafa0ae39e|ehlo|proceed
report|1|1561888072.458778|smtp-in|link-identify|d812eceafa0ae39e|localhost
report|1|1561888072.458784|smtp-in|protocol-server|d812eceafa0ae39e|250-laptop.home Hello localhost [local], pleased to meet you
report|1|1561888072.458787|smtp-in|protocol-server|d812eceafa0ae39e|250-8BITMIME
report|1|1561888072.458790|smtp-in|protocol-server|d812eceafa0ae39e|250-ENHANCEDSTATUSCODES
report|1|1561888072.458794|smtp-in|protocol-server|d812eceafa0ae39e|250-SIZE 36700160
report|1|1561888072.458797|smtp-in|protocol-server|d812eceafa0ae39e|250-DSN
report|1|1561888072.458800|smtp-in|protocol-server|d812eceafa0ae39e|250 HELP
report|1|1561888072.459268|smtp-in|protocol-client|d812eceafa0ae39e|MAIL FROM:&lt;gilles@laptop.home&gt;
report|1|1561888072.459718|smtp-in|filter-response|d812eceafa0ae39e|mail-from|proceed
report|1|1561888072.460764|smtp-in|tx-begin|d812eceafa0ae39e|754cbaa4
report|1|1561888072.460770|smtp-in|tx-mail|d812eceafa0ae39e|754cbaa4|&lt;gilles@laptop.home&gt;  |ok
report|1|1561888072.460774|smtp-in|protocol-server|d812eceafa0ae39e|250 2.0.0: Ok
report|1|1561888072.460995|smtp-in|protocol-client|d812eceafa0ae39e|RCPT TO:&lt;gilles@laptop.home&gt;
report|1|1561888072.461131|smtp-in|filter-response|d812eceafa0ae39e|rcpt-to|proceed
report|1|1561888072.462172|smtp-in|tx-envelope|d812eceafa0ae39e|754cbaa4|754cbaa41a1afada
report|1|1561888072.462180|smtp-in|tx-rcpt|d812eceafa0ae39e|754cbaa4|&lt;gilles@laptop.home&gt; |ok
report|1|1561888072.462184|smtp-in|protocol-server|d812eceafa0ae39e|250 2.1.5 Destination address valid: Recipient ok
report|1|1561888072.462496|smtp-in|protocol-client|d812eceafa0ae39e|DATA
report|1|1561888072.462638|smtp-in|filter-response|d812eceafa0ae39e|data|proceed
report|1|1561888072.463142|smtp-in|tx-data|d812eceafa0ae39e|754cbaa4|ok
report|1|1561888072.463147|smtp-in|protocol-server|d812eceafa0ae39e|354 Enter mail, end with &#34;.&#34; on a line by itself
report|1|1561888072.463866|smtp-in|protocol-client|d812eceafa0ae39e|.
report|1|1561888072.463997|smtp-in|filter-response|d812eceafa0ae39e|commit|proceed
report|1|1561888072.464034|smtp-in|tx-commit|d812eceafa0ae39e|754cbaa4|477
report|1|1561888072.465786|smtp-in|protocol-server|d812eceafa0ae39e|250 2.0.0: 754cbaa4 Message accepted for delivery
report|1|1561888072.466065|smtp-in|protocol-client|d812eceafa0ae39e|QUIT
report|1|1561888072.466294|smtp-in|filter-response|d812eceafa0ae39e|quit|proceed
report|1|1561888072.466300|smtp-in|protocol-server|d812eceafa0ae39e|221 2.0.0: Bye
report|1|1561888072.466481|smtp-in|link-disconnect|d812eceafa0ae39e
</code></pre><h2 class="relative group">libopensmtpd<div id=libopensmtpd class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#libopensmtpd aria-label=Anchor>#</a></span></h2><p>The filters protocol is a very simple line-based protocol that I already explained in previous blog posts,
but while writing filters in various scripting languages is simple,
writing a filter in C was still a bit tedious.</p><p>I started writing a <code>libopensmtpd</code> to provide a straightforward method for writing native C filters.
It is not ready yet for publishing but it is already functional and works enough to trigger all hooks.</p><p>All it takes is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ cc -o /tmp/filter-debug debug.c -lopensmtpd
</span></span><span style=display:flex><span>$
</span></span></code></pre></div><p>To make the following filter usable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#6272a4>/*
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * Copyright (c) 2019 Gilles Chehade &lt;gilles@poolp.org&gt;
</span></span></span><span style=display:flex><span><span style=color:#6272a4> *
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * Permission to use, copy, modify, and distribute this software for any
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * purpose with or without fee is hereby granted, provided that the above
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * copyright notice and this permission notice appear in all copies.
</span></span></span><span style=display:flex><span><span style=color:#6272a4> *
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * THE SOFTWARE IS PROVIDED &#34;AS IS&#34; AND THE AUTHOR DISCLAIMS ALL WARRANTIES
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
</span></span></span><span style=display:flex><span><span style=color:#6272a4> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>#include</span> <span style=color:#ff79c6>&lt;err.h&gt;</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span><span style=color:#ff79c6>#include</span> <span style=color:#ff79c6>&lt;inttypes.h&gt;</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span><span style=color:#ff79c6>#include</span> <span style=color:#ff79c6>&lt;stdlib.h&gt;</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span><span style=color:#ff79c6></span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>#include</span> <span style=color:#ff79c6>&#34;opensmtpd.h&#34;</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span><span style=color:#ff79c6></span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>extern</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>__progname;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>/* reporting */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_link_connect</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>rdns, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>fcrdns, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>src, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>dest)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_link_connect: rdns=%s, fcrdns=%s, src=%s, dest=%s&#34;</span>,
</span></span><span style=display:flex><span>	    rdns, fcrdns, src, dest);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_link_disconnect</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_link_disconnect&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_link_identify</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>helo_name)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_link_identify: helo_name=%s&#34;</span>,
</span></span><span style=display:flex><span>		helo_name);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_link_tls</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>tls_line)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_link_tls: tls_line=%s&#34;</span>,
</span></span><span style=display:flex><span>	    tls_line);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_tx_begin</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#8be9fd>uint32_t</span> msgid)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_tx_begin: msgid=%08x&#34;</span>,
</span></span><span style=display:flex><span>	    msgid);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_tx_mail</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#8be9fd>uint32_t</span> msgid, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>mail_from, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>result)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_tx_mail: msgid=%08x, mail_from=%s, result=%s&#34;</span>,
</span></span><span style=display:flex><span>	    msgid, mail_from, result);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_tx_rcpt</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#8be9fd>uint32_t</span> msgid, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>rcpt_to, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>result)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_tx_rcpt: msgid=%08x, mail_from=%s, result=%s&#34;</span>,
</span></span><span style=display:flex><span>	    msgid, rcpt_to, result);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_tx_envelope</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#8be9fd>uint32_t</span> msgid, <span style=color:#8be9fd>uint64_t</span> evpid)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_tx_envelope: msgid=%08x, evpid=%016&#34;</span>PRIx64<span style=color:#f1fa8c>&#34;&#34;</span>,
</span></span><span style=display:flex><span>	    msgid, evpid);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_tx_commit</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#8be9fd>uint32_t</span> msgid)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_tx_commit: msgid=%08x&#34;</span>,
</span></span><span style=display:flex><span>	    msgid);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_tx_data</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#8be9fd>uint32_t</span> msgid, <span style=color:#8be9fd>size_t</span> msg_size)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_tx_data: msgid=%08x, msg_size=%zd&#34;</span>,
</span></span><span style=display:flex><span>	    msgid, msg_size);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_tx_rollback</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#8be9fd>uint32_t</span> msgid)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_tx_rollback: msgid=%08x&#34;</span>,
</span></span><span style=display:flex><span>	    msgid);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_protocol_client</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>line)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_protocol_client: line=%s&#34;</span>,
</span></span><span style=display:flex><span>	    line);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_protocol_server</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>line)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_protocol_server: line=%s&#34;</span>,
</span></span><span style=display:flex><span>	    line);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_filter_response</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>phase, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>response)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_filter_response: phase=%s, response=%s&#34;</span>,
</span></span><span style=display:flex><span>	    phase, response);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>report_timeout</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;report_timeout&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>/* filtering */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_connect</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>rdns, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_connect: rdns=%s, arg=%s&#34;</span>, rdns, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_helo</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_helo: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_ehlo</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_ehlo: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_starttls</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_starttls: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_auth</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_auth: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_mail_from</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_mail_from: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_rcpt_to</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_rcpt_to: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_data</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_data: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_data_line</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_data_line: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>dataline</span>(ctx, arg);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_rset</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_rset: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_quit</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_quit: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_noop</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_noop: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_help</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_help: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_wiz</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_wiz: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>void</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>filter_commit</span>(<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx, <span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>arg)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>warnx</span>(<span style=color:#f1fa8c>&#34;filter_commit: arg=%s&#34;</span>, arg);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>proceed</span>(ctx);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd>int</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>main</span>(<span style=color:#8be9fd>int</span> argc, <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>argv[])
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#8be9fd>opensmtpd_ctx_t</span> <span style=color:#ff79c6>*</span>ctx;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>if</span> (argc <span style=color:#ff79c6>!=</span> <span style=color:#bd93f9>1</span>)
</span></span><span style=display:flex><span>		<span style=color:#50fa7b>errx</span>(<span style=color:#bd93f9>1</span>, <span style=color:#f1fa8c>&#34;usage: %s&#34;</span>, __progname);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_init</span>(<span style=color:#ff79c6>&amp;</span>ctx);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;link-connect&#34;</span>, report_link_connect);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;link-disconnect&#34;</span>, report_link_disconnect);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;link-identify&#34;</span>, report_link_identify);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;link-tls&#34;</span>, report_link_tls);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;tx-begin&#34;</span>, report_tx_begin);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;tx-mail&#34;</span>, report_tx_mail);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;tx-rcpt&#34;</span>, report_tx_rcpt);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;tx-envelope&#34;</span>, report_tx_envelope);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;tx-data&#34;</span>, report_tx_data);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;tx-commit&#34;</span>, report_tx_commit);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;tx-rollback&#34;</span>, report_tx_rollback);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;protocol-client&#34;</span>, report_protocol_client);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;protocol-server&#34;</span>, report_protocol_server);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;filter-response&#34;</span>, report_filter_response);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_report</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;timeout&#34;</span>, report_timeout);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;connect&#34;</span>, filter_connect);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;helo&#34;</span>, filter_helo);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;ehlo&#34;</span>, filter_ehlo);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;starttls&#34;</span>, filter_starttls);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;auth&#34;</span>, filter_auth);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;mail-from&#34;</span>, filter_mail_from);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;rcpt-to&#34;</span>, filter_rcpt_to);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;data&#34;</span>, filter_data);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;rset&#34;</span>, filter_rset);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;quit&#34;</span>, filter_quit);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;noop&#34;</span>, filter_noop);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;help&#34;</span>, filter_help);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;wiz&#34;</span>, filter_wiz);
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;commit&#34;</span>, filter_commit);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#50fa7b>smtpd_on_filter</span>(ctx, <span style=color:#f1fa8c>&#34;smtp-in&#34;</span>, <span style=color:#f1fa8c>&#34;data-line&#34;</span>, filter_data_line);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span> <span style=color:#50fa7b>smtpd_event_loop</span>(ctx))
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>return</span> <span style=color:#bd93f9>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>return</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>and register all hooks:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>laptop$ /tmp/filter-debug
</span></span><span style=display:flex><span>register|report|smtp-in|filter-response
</span></span><span style=display:flex><span>register|report|smtp-in|link-connect
</span></span><span style=display:flex><span>register|report|smtp-in|link-disconnect
</span></span><span style=display:flex><span>register|report|smtp-in|link-identify
</span></span><span style=display:flex><span>register|report|smtp-in|link-tls
</span></span><span style=display:flex><span>register|report|smtp-in|protocol-client
</span></span><span style=display:flex><span>register|report|smtp-in|protocol-server
</span></span><span style=display:flex><span>register|report|smtp-in|timeout
</span></span><span style=display:flex><span>register|report|smtp-in|tx-begin
</span></span><span style=display:flex><span>register|report|smtp-in|tx-commit
</span></span><span style=display:flex><span>register|report|smtp-in|tx-data
</span></span><span style=display:flex><span>register|report|smtp-in|tx-envelope
</span></span><span style=display:flex><span>register|report|smtp-in|tx-mail
</span></span><span style=display:flex><span>register|report|smtp-in|tx-rcpt
</span></span><span style=display:flex><span>register|report|smtp-in|tx-rollback
</span></span><span style=display:flex><span>register|filter|smtp-in|auth
</span></span><span style=display:flex><span>register|filter|smtp-in|commit
</span></span><span style=display:flex><span>register|filter|smtp-in|connect
</span></span><span style=display:flex><span>register|filter|smtp-in|data
</span></span><span style=display:flex><span>register|filter|smtp-in|data-line
</span></span><span style=display:flex><span>register|filter|smtp-in|ehlo
</span></span><span style=display:flex><span>register|filter|smtp-in|helo
</span></span><span style=display:flex><span>register|filter|smtp-in|<span style=color:#8be9fd;font-style:italic>help</span>
</span></span><span style=display:flex><span>register|filter|smtp-in|mail-from
</span></span><span style=display:flex><span>register|filter|smtp-in|noop
</span></span><span style=display:flex><span>register|filter|smtp-in|quit
</span></span><span style=display:flex><span>register|filter|smtp-in|rcpt-to
</span></span><span style=display:flex><span>register|filter|smtp-in|rset
</span></span><span style=display:flex><span>register|filter|smtp-in|starttls
</span></span><span style=display:flex><span>register|filter|smtp-in|wiz
</span></span><span style=display:flex><span>register|ready
</span></span><span style=display:flex><span>^C
</span></span><span style=display:flex><span>laptop$
</span></span></code></pre></div><p>In OpenSMTPD, with the following config:</p><pre tabindex=0><code>[...]
filter foobar proc-exec &#34;/tmp/filter-debug&#34;

listen on socket filter foobar
</code></pre><p>it will result in the following output:</p><pre tabindex=0><code>[...]
86c0820a13ffee17 smtp connected address=local host=laptop.home
&lt;dynproc:00000001&gt;: filter-debug: report_link_connect: rdns=laptop.home, fcrdns=pass, src=local:0, dest=local:0
&lt;dynproc:00000001&gt;: filter-debug: filter_connect: rdns=laptop.home, arg=local
&lt;dynproc:00000001&gt;: filter-debug: report_filter_response: phase=connected, response=proceed
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=220 laptop.home ESMTP OpenSMTPD
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_client: line=EHLO localhost
&lt;dynproc:00000001&gt;: filter-debug: filter_ehlo: arg=localhost
&lt;dynproc:00000001&gt;: filter-debug: report_filter_response: phase=ehlo, response=proceed
&lt;dynproc:00000001&gt;: filter-debug: report_link_identify: helo_name=localhost
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250-laptop.home Hello localhost [local], pleased to meet you
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250-8BITMIME
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250-ENHANCEDSTATUSCODES
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250-SIZE 36700160
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250-DSN
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250 HELP
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_client: line=MAIL FROM:&lt;gilles@laptop.home&gt;
&lt;dynproc:00000001&gt;: filter-debug: filter_mail_from: arg=gilles@laptop.home
&lt;dynproc:00000001&gt;: filter-debug: report_filter_response: phase=mail-from, response=proceed
&lt;dynproc:00000001&gt;: filter-debug: report_tx_begin: msgid=2b8bbe3b
&lt;dynproc:00000001&gt;: filter-debug: report_tx_mail: msgid=2b8bbe3b, mail_from=&lt;gilles@laptop.home&gt;, result=ok
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250 2.0.0: Ok
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_client: line=RCPT TO:&lt;gilles@laptop.home&gt;
&lt;dynproc:00000001&gt;: filter-debug: filter_rcpt_to: arg=gilles@laptop.home
&lt;dynproc:00000001&gt;: filter-debug: report_filter_response: phase=rcpt-to, response=proceed
&lt;dynproc:00000001&gt;: filter-debug: report_tx_envelope: msgid=2b8bbe3b, evpid=2b8bbe3b60567a11
&lt;dynproc:00000001&gt;: filter-debug: report_tx_rcpt: msgid=2b8bbe3b, mail_from=&lt;gilles@laptop.home&gt;, result=ok
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250 2.1.5 Destination address valid: Recipient ok
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_client: line=DATA
&lt;dynproc:00000001&gt;: filter-debug: filter_data: arg=
&lt;dynproc:00000001&gt;: filter-debug: report_filter_response: phase=data, response=proceed
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=Received: from localhost (laptop.home [local])
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=        by laptop.home (OpenSMTPD) with ESMTPA id 2b8bbe3b
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=        for &lt;gilles@laptop.home&gt;;
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=        Sun, 30 Jun 2019 12:01:55 +0200 (CEST)
&lt;dynproc:00000001&gt;: filter-debug: report_tx_data: msgid=2b8bbe3b, msg_size=10034375646789
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=354 Enter mail, end with &#34;.&#34; on a line by itself
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=From:  &lt;gilles@laptop.home&gt;
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=Date: Sun, 30 Jun 2019 12:01:55 +0200 (CEST)
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=To: gilles
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=test
&lt;dynproc:00000001&gt;: filter-debug: filter_data_line: arg=.
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_client: line=.
&lt;dynproc:00000001&gt;: filter-debug: filter_commit: arg=
&lt;dynproc:00000001&gt;: filter-debug: report_filter_response: phase=commit, response=proceed
&lt;dynproc:00000001&gt;: filter-debug: report_tx_commit: msgid=2b8bbe3b
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_server: line=250 2.0.0: 2b8bbe3b Message accepted for delivery
&lt;dynproc:00000001&gt;: filter-debug: report_protocol_client: line=QUIT
&lt;dynproc:00000001&gt;: filter-debug: filter_quit: arg=
[...]
</code></pre><h2 class="relative group">filter-rspamd in progress<div id=filter-rspamd-in-progress class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#filter-rspamd-in-progress aria-label=Anchor>#</a></span></h2><p>I had written a filter-rspamd for OpenSMTPD in python already,
however it was a proof-of-concept more than a real filter and I didn&rsquo;t make it really robust.</p><p>With <code>libopensmtpd</code> at hands,
I decided to write a native C filter-rspamd that I would officially maintain,
one that would be robust enough to be used in production.</p><p>I had most of the logic done in half an hour,
unfortunately I ran out of time for this &ldquo;free&rdquo; week and didn&rsquo;t complete the filter.</p><p>Basically as it is right now, the filter will build everything needed for the call to <code>rspamd</code>,
but I didn&rsquo;t write the http request.</p><p>I will surely finish that during my next &ldquo;free&rdquo; week.</p><h2 class="relative group">What next ?<div id=what-next- class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#what-next- aria-label=Anchor>#</a></span></h2><p>Well, see you in a month for the July report.</p><p>Hopefully, by then I will have finished my filter-rspamd, I will have released an initial version of FION,
and I will have released an initial version of libopensmtpd.</p><p>When I&rsquo;m done with FION and have decided what to to with BPG,
I will have a look at some of my other private repositories to see what can be released :-)</p><p>If you like my work, <a href=https://patreon.com/gilles target=_blank>support me on patreon</a> !</p></br></br></div><script>var oid="views_posts/2019-06-30/index.md",oid_likes="likes_posts/2019-06-30/index.md"</script><script type=text/javascript src=/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q+oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="dark:text-neutral-300 text-sm">You reached the end of this article,
<b>CONGRATULATIONS</b> !<br><br><b>Please ❤️</b> consider <b>sharing on social networks</b> to increase its visibility.<br><br>You can also help by
<b>commenting the article</u></b>,
if only to let me know if you liked it or not !</span></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;text=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Tweet on Twitter" aria-label="Tweet on Twitter"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;resubmit=true&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://pinterest.com/pin/create/bookmarklet/?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;description=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Pin on Pinterest" aria-label="Pin on Pinterest"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M496 256c0 137-111 248-248 248-25.6.0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8.0 128.7-68.8 128.7-154.3.0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1.0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6.0-54.7 41.4-107.6 112-107.6 60.9.0 103.6 41.5 103.6 100.9.0 67.1-33.9 113.6-78 113.6-24.3.0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6.0-19-10.2-34.9-31.4-34.9-24.9.0-44.9 25.7-44.9 60.2.0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9.0 361.1.0 256 0 119 111 8 248 8s248 111 248 248z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;quote=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;subject=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://api.whatsapp.com/send?text=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;resubmit=true&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title aria-label><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4.0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3.0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2.0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2.0-101.7 82.8-184.5 184.6-184.5 49.3.0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5.0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3.0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://t.me/share/url?url=https://poolp.org/posts/2019-06-30/june-2019-report-fion-bpg-and-smtpd/&amp;resubmit=true&amp;title=June%202019%20report:%20fion,%20bpg%20and%20smtpd" title aria-label><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a></section><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><div id=comments><script src=https://giscus.app/client.js data-repo=poolpOrg/poolp.org data-repo-id="MDEwOlJlcG9zaXRvcnkxMjYxODk2MjA=" data-category=Articles data-category-id=DIC_kwDOB4WANM4B-Zf1 data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=light data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/2019-06-02/may-2019-report/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">May 2019 report</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2019-06-02T14:57:00+00:00>2 June 2019</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/posts/2019-07-27/july-2019-report-tons-of-smtpd-work-mostly/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">July 2019 report: tons of smtpd work mostly</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2019-07-27T07:27:00+00:00>27 July 2019</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">Copyright © Gilles Chehade - poolp.org
-
<u><a href=/legal/>Legal notice</a></u></p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://poolp.org/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=poolporg data-description="Support me on Buy me a coffee!" data-message="Support me !" data-color=#FFDD00 data-position=left data-x_margin=18 data-y_margin=18></script><div class=discord-button onclick='document.querySelector(".discord-dialog").className="discord-dialog discord-dialog--active"'><svg class="discord-button__icon" viewBox="0 0 24 24"><path d="M22 24l-5.25-5L17.38 21H4.5A2.5 2.5.0 012 18.5V3.5A2.5 2.5.0 014.5 1h15A2.5 2.5.0 0122 3.5V24M12 6.8c-2.68.0-4.56 1.15-4.56 1.15 1.03-.92 2.83-1.45 2.83-1.45l-.17-.17C8.41 6.36 6.88 7.53 6.88 7.53c-1.72 3.59-1.61 6.69-1.61 6.69 1.4 1.81 3.48 1.68 3.48 1.68L9.46 15c-1.25-.27-2.04-1.38-2.04-1.38S9.3 14.9 12 14.9s4.58-1.28 4.58-1.28S15.79 14.73 14.54 15L15.25 15.9S17.33 16.03 18.73 14.22C18.73 14.22 18.84 11.12 17.12 7.53c0 0-1.53-1.17-3.22-1.2l-.17.17s1.8.53 2.83 1.45c0 0-1.88-1.15-4.56-1.15M9.93 10.59c.65.0 1.18.57 1.17 1.27C11.1 12.55 10.58 13.13 9.93 13.13 9.29 13.13 8.77 12.55 8.77 11.86 8.77 11.16 9.28 10.59 9.93 10.59m4.17.0c.65.0 1.17.57 1.17 1.27C15.27 12.55 14.75 13.13 14.1 13.13 13.46 13.13 12.94 12.55 12.94 11.86 12.94 11.16 13.45 10.59 14.1 10.59z"/></svg></div><div class=discord-dialog><div class=discord-dialog__header><a href=https://discordapp.com><svg class="discord-dialog__logo" viewBox="0 0 532 130"><path d="M53.2 20.3H20v37.6l22.1 20V41.4H54c7.5.0 11.2 3.7 11.2 9.5v27.9c0 5.8-3.5 9.7-11.2 9.7H20v21.2h33.2c17.8.1 34.5-8.8 34.5-29.4V50.2c0-20.8-16.7-29.9-34.5-29.9zM227.3 80.4V49.6c0-11.1 19.8-13.7 25.8-2.5l18.3-7.5C264.3 23.7 251.1 19 240.2 19c-17.8.0-35.4 10.4-35.4 30.6v30.8c0 20.3 17.6 30.6 35 30.6 11.2.0 24.6-5.6 32-20.1l-19.6-9.1C247.4 94.2 227.3 91.2 227.3 80.4zM166.7 53.8c-6.9-1.5-11.5-4-11.8-8.3.4-10.4 16.3-10.7 25.6-.8l14.7-11.4C186 22 175.6 19 164.8 19c-16.3.0-32.1 9.2-32.1 26.8.0 17.1 13 26.2 27.3 28.4 7.3 1 15.4 3.9 15.2 9-.6 9.6-20.2 9.1-29.1-1.8L132 94.8c8.3 10.7 19.6 16.2 30.2 16.2 16.3.0 34.4-9.5 35.1-26.8C198.3 62.2 182.5 56.7 166.7 53.8zM99.8 109.7h22.4V20.3H99.8v89.4zM477.5 20.3h-33.2v37.6l22.1 20V41.4h11.8c7.5.0 11.2 3.7 11.2 9.5v27.9c0 5.8-3.5 9.7-11.2 9.7h-34v21.2h33.2c17.8.1 34.5-8.8 34.5-29.4V50.2C512 29.4 495.3 20.3 477.5 20.3zM314.6 19c-18.4.0-36.7 10.1-36.7 30.7v30.6c0 20.5 18.4 30.7 36.9 30.7 18.4.0 36.7-10.2 36.7-30.7V49.7C351.5 29.2 333 19 314.6 19zM329 80.3c0 6.4-7.2 9.7-14.3 9.7-7.2.0-14.4-3.2-14.4-9.7V49.7c0-6.6 7-10.1 14-10.1 7.3.0 14.7 3.2 14.7 10.1V80.3zM431.8 49.7c-.5-21-14.7-29.4-33-29.4h-35.5v89.5H386V81.3h4l20.6 28.4h28L414.4 79C425.2 75.6 431.8 66.3 431.8 49.7zM399.2 61.8H386V41.4h13.2c14.2.0 14.2 20.4.0 20.4z"/></svg></a></div><div class=discord-dialog__close-button onclick='document.querySelector(".discord-dialog").className="discord-dialog"'><svg viewBox="0 0 24 24"><path fill="#000" d="M13.46 12 19 17.54V19H17.54L12 13.46 6.46 19H5V17.54L10.54 12 5 6.46V5H6.46L12 10.54 17.54 5H19V6.46L13.46 12z"/></svg></div><div class=discord-dialog__container><div class=discord-dialog__guild>You're invited to join my Discord server</div>This is a chat server where I hang out, discuss my projects and sometimes screencast as I work on them.<br><br>Feel free to hop in, talk about your own projects, share your thoughts:
<b>this is a virtual coworking room for anyone to join</b>.</div><div class=discord-dialog__footer><a href=https://discord.gg/YC6j4rbvSk class=discord-dialog__btn>Join the server now</a></div></div></html>